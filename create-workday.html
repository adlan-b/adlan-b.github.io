<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="style.css" />
        <title>Страница для ввода рабочих часов</title>
        <!-- Подключение Telegram Web App JS SDK -->
        <script src="https://telegram.org/js/telegram-web-app.js"></script>
    </head>
    <body>

        <h2>Добавить рабочее время</h2>

        <div id="error"></div>
        <section>
            <form id="workHoursForm">
                <input type="date" placeholder="Дата" id="datum" required>
                <input type='number' placeholder='Час' id='stunde' min='0'
                    max='23' required>
                <input type='number' placeholder='Минута' id='minute' min='0'
                    max='59' step='1' required>
                <button type="button" id="senden">Отправить</button>
            </form>
        </section>

        <script type="application/javascript"> 
        document.addEventListener("DOMContentLoaded", function() {
           let tg = window.Telegram.WebApp;
   
           let form = document.getElementById('workHoursForm');
           let sendButton = document.getElementById('senden');

 
           sendButton.addEventListener("click", function(event) {
           event.preventDefault(); // Предотвратим автоматическую отправку формы

       let datum = document.getElementById('datum').value;
       let stunde = document.getElementById('stunde').value;
       let minute = document.getElementById('minute').value;

       if (form.checkValidity()) {
        let data = {
          datum: datum,
          stunde: parseInt(stunde),
          minute: parseInt(minute)
        };

       alert("Данные отправленны"); 
      
       tg.sendData(JSON.stringify(data));
       tg.close(); 
          
       } else {

         form.reportValidity();
         alert("Заполните поля правильно")
         return;

       } 
     
   });
});
</script>

    </body>
</html>